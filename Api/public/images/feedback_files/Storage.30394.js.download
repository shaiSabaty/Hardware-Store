NEG.Module("Biz.Storage",function(v){function n(){var f=arguments.callee;if(!(this instanceof f))return new f;var c={getConfig:function(){},setItem:function(){},getItem:function(){},removeItem:function(){},hasItem:function(){},getAll:function(){},forEach:function(){},serialize:function(a){try{return JSON.stringify(a)}catch(b){}},deserialize:function(a){if("string"!=typeof a)return{};try{return JSON.parse(a)}catch(b){return{}}}},t=function(a){if(!g)throw"config error";if(g[a])return g[a];for(var b in g)if(g[b]&&g[b].name===a)return g[b];throw"no key["+a+"] in config, please check";},o;try{m[h].setItem("s_rwt","t"),m[h].removeItem("s_rwt","t"),o=!0}catch(x){o=!1}if(o){var e=m[h],i=function(a){a=t(a);return{subKey:a.name,storage:e.getItem(j)?c.deserialize(e.getItem(j)):{},exp:a.exp}};c.setItem=function(a,b){var d=i(a),p=void 0===d.storage[d.subKey]?{}:d.storage[d.subKey];if(void 0===b)c.removeItem(a);else return p.value=c.serialize(b),p.date=(new Date).getTime(),d.storage[d.subKey]=p,e.setItem(j,c.serialize(d.storage)),b};c.getItem=function(a,b){var d=i(a),e=void 0===d.storage[d.subKey]?{}:d.storage[d.subKey];if(void 0===e)return b;return(new Date).getTime()-e.date>d.exp?(c.removeItem(a),b):void 0===e.value?b:c.deserialize(e.value)};c.removeItem=function(a){a=i(a);delete a.storage[a.subKey];e.setItem(j,c.serialize(a.storage))};c.getAll=function(){var a={};c.forEach(function(b,d){a[b]=d});return a};c.forEach=function(a){var b=c.deserialize(e.getItem(j));if(b)for(var d in b)a(d,c.getItem(d))}}else if(q.documentElement.addBehavior){var k,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+u+">document.w=window</"+u+'><iframe src="/favicon.ico"></iframe>'),l.close(),k=l.w.frames[0].document,e=k.createElement("div")}catch(n){e=q.createElement("div"),k=q.body}var f=function(a){return function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(e);k.appendChild(e);e.addBehavior("#default#userData");e.load(h);b=a.apply(c,b);k.removeChild(e);return b}},w=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),r=function(a){return a.replace(/^d/,"___$&").replace(w,"___")};c.setItem=f(function(a,b,d){b=r(b);if(void 0===d)return c.remove(b);a.setAttribute(b,c.serialize(d));a.save(h);return d});c.getItem=f(function(a,b,d){b=r(b);a=c.deserialize(a.getAttribute(b));return void 0===a?d:a});c.removeItem=f(function(a,b){b=r(b);a.removeAttribute(b);a.save(h)});c.getAll=function(){var a={};c.forEach(function(b,d){a[b]=d});return a};c.forEach=f(function(a,b){for(var d=a.XMLDocument.documentElement.attributes,e=0,f;f=d[e];++e)b(f.name,c.deserialize(a.getAttribute(f.name)))})}else{var s=v("Utility.Cookie"),i=function(a){return{subKey:"nls_"+t(a).name}};c.setItem=function(a,b){var d=i(a).subKey;s.set(d,c.serialize(b),{path:"/"})};c.getItem=function(a,b){var d=i(a).subKey,d=s.get(d);return void 0===d||""===d?b:c.deserialize(d)};c.removeItem=function(a){a=i(a).subKey;s.remove(a)}}NEG.merge(this,c)}var j="NV_NeweggLocalStorage",g={AutoHistory:{name:"w1",exp:2592E6},ItemSearchKeywords:{name:"w2",exp:2592E6},ItemViewed:{name:"w3",exp:2592E6},ItemInnerSearchKeywords:{name:"w4",exp:2592E6},ItemOrdered: { name: "w5", exp: 2592E6 }, EnhanceCrossSell: { name: "w6", exp: 2592E6 }, Compare: { name: "w7", exp: 2592E6 }, ForumRecentlyViewed: { name: "w56", exp: 2592E6 }, IsPopupSelectorInHomePage: { name: "w59", exp: 864E8 }, BlackOut: { name: "w40", exp: 864E8 }, VolumeDissountCollapsibleState: { name: "w8", exp: 2592E6 }, Compare2019: { name: "w9", exp: 2592E6 }},m=window,q=m.document,h="localStorage",u="script";return function(){var f=n(),c=n();NEG.merge(c,{getItem:function(c,g){var h=f.getItem(c);return void 0===h?g:h},setItem:function(c,g){f.setItem(c,g)}});return c}()});